<div class="accordion-item">
                <h2 class="accordion-header" id="heading-{{ loop.index0 }}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapse-{{ loop.index0 }}" aria-expanded="false"
                        aria-controls="collapse-{{ loop.index0 }}">
                        <div class="accordion-button-content-wrapper">
                            <div class="property-title-in-header">{{ property.title | default('N/A') }}</div>
                        </div>
                    </button>
                </h2>

                <!-- Carousel moved outside the button for layout integrity -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        {% if property.image_url and property.image_url is iterable and property.image_url is not string
                        %}
                        <div id="carousel-{{ loop.index0 }}" class="carousel slide" data-bs-ride="carousel"
                            data-bs-interval="3500">
                            <div class="carousel-inner">
                                {% for image_src in property.image_url %}
                                <div class="carousel-item {% if loop.first %}active{% endif %}">
                                    <img src="{{ image_src }}" class="d-block w-100"
                                        alt="Property Image {{ loop.index }}"
                                        onerror="this.onerror=null;this.parentElement.innerHTML='<div class=\'img-fallback\'>Image not available</div>';">
                                </div>
                                {% endfor %}
                            </div>
                            {% if property.image_url|length > 1 %}
                            <button class="carousel-control-prev" type="button"
                                data-bs-target="#carousel-{{ loop.index0 }}" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button"
                                data-bs-target="#carousel-{{ loop.index0 }}" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <div class="img-fallback">No images available</div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-start">
                        <div class="score mb-2">
                            <strong>Gap Score:</strong>
                            {{ property.gap_score | round(2) | default('N/A') }}
                        </div>
                        <div class="score mb-2">
                            <strong>Cosine Similarity Score:</strong>
                            {{ property.similarity_score | round(2) | default('N/A') }}
                        </div>
                        <div class="score">
                            {% if property.price %}
                            <p><strong>Price:</strong> Rp {{ "{:,.0f}".format(property.price)|replace(",", ".") }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div id="collapse-{{ loop.index0 }}" class="accordion-collapse collapse"
                    aria-labelledby="heading-{{ loop.index0 }}" data-bs-parent="#propertyAccordion">
                    <div class="accordion-body">
                        <!-- Description Section -->
                        <div class="property-description mb-3">
                            <h5>Description</h5>
                            <p>
                                {{ property.description | default("No description available.") }}
                            </p>
                        </div>
                        <!-- Existing Details Section -->
                        <div class="details-columns">
                            <div>
                                <ul>
                                    <li><strong>Land Area:</strong> {{ property.land_area | default('N/A') }} m²</li>
                                    <li><strong>Building Area:</strong> {{ property.building_area | default('N/A') }} m²
                                    </li>
                                    <li><strong>Bedrooms:</strong> {{ property.bedrooms | default('N/A') }}</li>
                                    <li><strong>Bathrooms:</strong> {{ property.bathrooms | default('N/A') }}</li>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li><strong>Floors:</strong> {{ property.floors | default('N/A') }}</li>
                                    <li><strong>Certificate:</strong> {{ property.certificate | default('N/A') }}</li>
                                    <li>
                                        <strong>Facilities:</strong>
                                        {% if property.facilities %}
                                        {% if property.facilities is iterable and property.facilities is not string %}
                                        {{ property.facilities | join(', ') }}
                                        {% else %}
                                        {{ property.facilities }}
                                        {% endif %}
                                        {% else %}
                                        N/A
                                        {% endif %}
                                    </li>
                                    <li>
                                        <strong>Amenities:</strong>
                                        {% if property.amenities %}
                                        <p>{{ property.amenities | join(', ') }}</p>
                                        {% endif %}
                                    </li>
                                </ul>
                            </div>
                            <!-- Description Section (newly added) -->
                            <div class="property-description mb-3">
                                <h5>Reasoning</h5>
                                <p>This is a placeholder for the property description. In the future, this can be
                                    populated
                                    with details like location benefits, recent renovations, or neighborhood highlights.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>